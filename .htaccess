# ==============================
# STRA≈ª PO≈ªARCIE - KONFIGURACJA .HTACCESS
# ==============================

# üîí Wymuszenie HTTPS (je≈õli kto≈õ wejdzie przez http://)
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ==============================
# üîê NAG≈Å√ìWKI BEZPIECZE≈ÉSTWA
# ==============================

# Wymuszony HTTPS w przeglƒÖdarce
Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"

# Blokada wczytywania strony w ramkach (Clickjacking)
Header always append X-Frame-Options SAMEORIGIN

# Blokada domy≈õlnego zgadywania typ√≥w MIME
Header set X-Content-Type-Options nosniff

# Polityka odwo≈Ça≈Ñ (Referrer Policy)
Header set Referrer-Policy strict-origin-when-cross-origin

# Polityka prywatno≈õci (blokada FLoC)
Header set Permissions-Policy "interest-cohort=()"

# Polityka Cross-Origin (COOP + COEP)
Header set Cross-Origin-Opener-Policy same-origin
Header set Cross-Origin-Embedder-Policy require-corp

# Polityka bezpiecze≈Ñstwa tre≈õci (CSP)
Header set Content-Security-Policy "default-src 'self' https: data: blob:; img-src 'self' https: data: blob:; style-src 'self' 'unsafe-inline' https:; script-src 'self' https: 'unsafe-inline'; frame-src https:; connect-src 'self' https:;"

# ==============================
# ‚ö°Ô∏è CACHE DLA STATYCZNYCH PLIK√ìW
# ==============================

<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/html "access plus 1 hour"
  ExpiresByType text/css "access plus 30 days"
  ExpiresByType application/javascript "access plus 30 days"
  ExpiresByType image/webp "access plus 30 days"
  ExpiresByType image/jpeg "access plus 30 days"
  ExpiresByType image/png "access plus 30 days"
  ExpiresByType image/x-icon "access plus 30 days"
  ExpiresDefault "access plus 7 days"
</IfModule>

# ==============================
# üåê KODOWANIE I DOMY≈öLNA STRONA
# ==============================

AddDefaultCharset UTF-8

<IfModule mod_mime.c>
  AddType text/css .css
  AddType application/javascript .js
  AddType image/webp .webp

# ==============================
# üßπ BLOKOWANIE NIECHCIANYCH ≈ªƒÑDA≈É
# ==============================

# Brak listowania plik√≥w w katalogach
Options -Indexes

# Ochrona pliku .htaccess
<Files .htaccess>
  Order Allow,Deny
  Deny from all
</Files>
